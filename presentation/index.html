<!doctype html>
<html lang="sv">
<meta charset="utf-8" />
<title>GrillCon Rust</title>

<!-- Mithril HTML Slideshow styles -->
<link href="https://fonts.googleapis.com/css?family=Playfair+Display|Roboto+Condensed:300" rel="stylesheet">
<link href="css/mithril-slideshow.css" rel="stylesheet" />

<!-- Code formatting using highlight.js -->
<link rel="stylesheet" href="css/default.css">
<link rel="stylesheet" href="css/tomorrow.css">
<script src="js/highlight.pack.js"></script>

<!-- Text formatting using Markdown through showdown.js -->
<script src="js/showdown.min.js"></script>



<!-- Here comes the slides in order -->
<script data-role="slide" type="text/html">
<div class="dark-blue">
    <div class="pink">
        <h1 class="starter">Assessing Knowledge Through Written Reviews of First-Year Programming Students</h1>
    </div>
    <div class="pink rotator">&nbsp;</div>
    <p>Emil Folino, efo@bth.se</p>
</div>
</script>



<script data-role="slide" type="text/html">
<h1>Webbspråk</h1>
<h3>JavaScript, PHP, Python, Ruby</h3>
</script>



<script data-role="slide" type="text/html">
<h1>Java?</h1>
</script>



<script data-role="slide" type="text/html">
<h1>C?</h1>
<h3>Segmentation fault</h3>
</script>



<script data-role="slide" type="text/html">
<h1>Rust</h1>
<h3>Kompilerar bort segfaults</h3>
<h3>Minnes säkert</h3>
<h3>Tråd säkert</h3>
</script>



<script data-role="slide" type="text/html">
<h1>TSP</h1>
<h3>11 högskolor</h3>
</script>



<script data-role="slide" type="text/html">
<img src="img/resan.png">
</script>



<script data-role="slide" type="text/html">
<p>BTH Lund Uppsala</p>
<p>BTH Uppsala Lund</p>
<p>Lund BTH Uppsala</p>
<p>Lund Uppsala BTH</p>
<p>Uppsala BTH Lund</p>
<p>Uppsala Lund BTH</p>
</script>



<script data-role="slide" type="text/html">
<h3>11 högskoler</h3>
<h3>11! permutationer</h3>
<h3>~40 miljoner unika kombinationer</h3>
</script>



<script data-role="slide" type="text/html">
<pre data-code="tsp.pseudo"></pre>
</script>



<script id="tsp.pseudo" data-role="code" data-language="c" type="text/html">
    The Countdown QuickPerm Algorithm:

    let a[] a list of objects to permute
    let N equal the length of a[]
    p[] of size N+1 to control the iteration
    initialize p[0] to 0, p[1] to 1, ..., p[N] to N
    initialize variable i to 1
    while (i < N) do {
        decrement p[i] by 1
        if i is odd, then let j = p[i] otherwise let j = 0
        swap(a[j], a[i])
        let i = 1
        while (p[i] is equal to 0) do {
            let p[i] = i
            increment i by 1
        } // end while (p[i] is equal to 0)
    } // end while (i < N)
</script>



<script data-role="slide" type="text/html">
<pre data-code="tsp_rustc.rs"></pre>
</script>



<script id="tsp_rustc.rs" data-role="code" data-language="c" type="text/html">
    while i < n {
        p[i] -= 1;
        let j = i % 2 * p[i];
        cities.swap(i, j);

        let mut trip_length = 0.0;

        for pair in cities.windows(2) {
            let (_, lat0, long0) = universities[pair[0]];
            let (_, lat1, long1) = universities[pair[1]];

            trip_length += ((lat1 - lat0).powi(2) + (long1 - long0).powi(2)).sqrt();
        }

        if trip_length < shortest_trip {
            shortest_trip = trip_length;
            shortest_trip_universities = cities.to_vec();
        }

        i = 1;
        while p[i] == 0 {
            p[i] = i;
            i += 1;
        }
    }
</script>



<script data-role="slide" type="text/html">
<h1>Prestanda</h1>
</script>



<script data-role="slide" type="text/html">
    <pre data-code="test.bash"></pre>
</script>



<script id="test.bash" data-role="code" data-language="bash" type="text/html">
$ rustc -C opt-level=3 -C target-cpu=native tsp_rustc.rs
$ time ./tsp_rustc
Shortest trip length: 21.058498609348383
BTH --> Linné --> Lund --> Chalmers --> Karlstad --> Örebro --> Linköping --> KTH --> Uppsala --> Umeå --> Luleå

real	0m1.831s
user	0m1.821s
sys	0m0.004s

</script>



<script data-role="slide" type="text/html">
<table>
<thead>
    <tr>
        <th></th>
        <th>Tid</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Python</td>
        <td>7m 27.620s</td>
    </tr>

    <tr>
        <td>Ruby</td>
        <td>4m 12.508s</td>
    </tr>

    <tr>
        <td>Python itertools</td>
        <td>3m 44.372s</td>
    </tr>

    <tr>
        <td>PHP5.6</td>
        <td>3m 53.114s</td>
    </tr>

    <tr>
        <td>PHP7</td>
        <td>2m 0.664s</td>
    </tr>

    <tr>
        <td>JavaScript (nodejs)</td>
        <td>0m 23.926s</td>
    </tr>

    <tr>
        <td>Java</td>
        <td>A</td>
    </tr>

    <tr>
        <td>C</td>
        <td>B</td>
    </tr>

    <tr>
        <td>Rust hash tables</td>
        <td>0m 18.443s</td>
    </tr>

    <tr>
        <td>Rust slices</td>
        <td>0m 1.539s</td>
    </tr>
</tbody>
</table>
</script>



<script data-role="slide" type="text/html">
<h1>Ska vi gå nära metallen?</h1>
</script>



<!-- include essential js-script -->
<script src="js/mithril.min.js"></script>
<script src="js/mithril-slideshow.js"></script>
</html>
